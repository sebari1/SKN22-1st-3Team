# 국내 자동차 시장 분석 프로젝트 – 전체 이슈 종합 문서

이 문서는 프로젝트 진행 과정에서 발생했던 **주요 문제, 설계 변경, 기술적 판단, 스코프 조절 이슈**들을  
상세한 맥락과 함께 기록한 문서이다.  
모든 내용은 **현재 스키마 및 프로젝트 방향성과 정확히 일치하도록 정리**되었다.

---

# 1. 데이터 소스 관련 이슈

## 1-1. Google Trends 활용 문제
### 이슈 내용
- Google Trends는 공식 API가 존재하지 않음.
- pytrends 등 비공식 방식만 사용 가능하며,  
  - 세션 만료  
  - 요청 차단  
  - 국가 parameter 불안정  
  등의 문제 발생 가능성이 큼.
- 검색 지표가 “상대지수(0~100)”로 제공되어  
  **절대량 비교가 불가능하며 해석 주의가 반드시 요구됨.**

### 왜 문제가 되었는가?
- 우리 프로젝트는 **월 단위 관심도 비교**가 핵심인데  
  구글 지표는 기준선 자체가 검색어 집합에 따라 변하여
  **정확한 시간 비교를 보장하지 않음.**
- 네이버/다나와처럼 “절대적 국내 검색량 추세”를 제공하지 못함.

### 결정 / 조치
- MVP에서는 **Google Trends 제외**.
- 스키마의 `google_trend_index` 컬럼은 확장 가능성을 고려해 유지하되  
  **NULL 허용 값으로 두고 사용하지 않음.**
- 확장 로드맵에서만 관리.

---

## 1-2. 현대/기아 API 부적합 이슈
### 이슈 내용
- 현대/기아 데이터 API는 OAuth2 인증이 필수이며,  
  제공하는 데이터 구조가 매우 복잡하고 스펙 중심임.
- 응답 데이터 구조가 현재 우리가 설계한 테이블 구조와 **완전히 다름**.
  - 모델명/트림명 구조 불일치
  - 컬러/옵션 구조가 tree 구조 기반
  - 주요 스펙은 static 데이터로 트렌드 분석 목적과 거리 있음

### 왜 문제가 되었는가?
- 우리의 프로젝트 스키마는 “트렌드 분석”에 필요한  
  **관심도·판매·검색량·텍스트 기반 데이터 중심으로 구성**되어 있음.
- 현대/기아 API는 “스펙/옵션/색상” 중심으로,  
  **이번 프로젝트의 분석 목적과 맞지 않음.**

### 결정 / 조치
- **현대/기아 API는 완전히 제외**.
- 스키마 및 문서에서 영향 제거 완료.

---

## 1-3. 다나와 데이터 구조 문제
### 이슈 내용
- 다나와 판매실적/인기순 데이터의 모델명이 일관되지 않음.
  - 예: “K5”, “K5 하이브리드”, “K5 (LPG)”
- 인기순 데이터와 판매실적 데이터의 기준 날짜 불명확.
- 모델 ID가 없어 문자열 기반 매핑이 필요함.

### 왜 문제가 되었는가?
- 정규화가 잘못되면 모델 비교 시 데이터가 섞이거나 누락될 위험이 있음.
- 동일 모델의 월별 추세가 다른 이름으로 저장될 가능성이 있어  
  **관심도 추세가 깨지게 됨.**

### 결정 / 조치
- 모든 데이터의 기준 모델을 `car_model` 테이블에서 관리하도록 결정.
- 크롤링 시 모델명 정규화 규칙(공백 제거, 괄호 제거, 하이브리드 라벨 통일) 적용.

---

## 1-4. 네이버 데이터랩 검색량 문제
### 이슈 내용
- 네이버 데이터랩은 월/주 단위만 제공.
- 모델명 그대로 사용하면 “원치 않는 키워드”가 검색에 포함될 위험 있음.
  - 예: “EV6” 검색 시 전기차 일반 기사까지 포함될 수 있음.

### 왜 문제가 되었는가?
- 우리 분석은 “특정 모델명에 대한 순수 관심도”를 반영해야 하는데  
  네이버의 검색 API는 키워드 매칭이 완전히 투명하지 않음.
- 일부 모델명(예: 레이, 모닝)은 일반 단어와 충돌 가능.

### 결정 / 조치
- “검색용 모델명 매핑 테이블” 별도 유지.  
- 인위적 정제 키워드 사용(“K5 기아”, “현대 아반떼 2023” 등) 검토.

---

## 1-5. 네이버 블로그 본문 수집 문제
### 이슈 내용
- 기존에는 summary만 긁는 방식이었음 → 품질 낮음.
- 모델명 검색 시 광고/협찬 블로그가 상위에 고정되는 문제.
- 본문 전체를 긁지 않으면 **워드클라우드 품질이 심각하게 낮아짐.**

### 왜 문제가 되었는가?
- 블로그 데이터는 “사용자 인식 분석”의 핵심.
- 본문 길이와 단어 빈도에 따라 결과가 크게 달라짐.

### 결정 / 조치
- 상위 3개 블로그 글의 **본문 전체(full body)** 수집 방식으로 변경.
- 광고성 키워드 제거, 불용어 제거 등 전처리 규칙 강화.

---

## 1-6. 공공데이터 모델 매핑 문제
### 이슈 내용
- 공공데이터는 모델명을 제공하지 않음.
- 차종/연료만 제공(예: “중형 세단”, “전기 SUV”).
- 특정 모델과 직접 매핑 불가능.

### 왜 문제가 되었는가?
- 처음에는 공공데이터를 “보급률 정보”로 사용할 계획이었으나,  
  실제로는 개별 모델 레벨 분석이 불가능.

### 결정 / 조치
- 공공데이터는 **시장 레벨 참고 지표로만 사용**.  
- 모델 단위 결합은 확장 로드맵(세그먼트 자동 매핑)에서만 처리.

---

# 2. 스키마/설계 관련 이슈

## 2-1. 초기 스키마와 실제 데이터 미스매치
### 이슈 내용
- 초기에 설계한 스키마가 실제 데이터 구조와 충돌.
- 컬럼명, 테이블명, 정규화 관계가 여러 번 재수정 필요했음.

### 왜 문제가 되었는가?
- 다나와/네이버/블로그/공공데이터의 실제 형태를  
  분석 전에 정확히 알 수 없었기 때문.
- JSON 구조 기반 크롤링은 실제로 데이터를 받아보아야 구조가 확정됨.

### 결정 / 조치
- 최종 스키마를 통합 문서로 재작성.
- 테이블 간 외래키·컬럼명 통일.

---

## 2-2. Interest Score 구성 이슈
### 이슈 내용
- 최초에는 Google Trends 포함 3축(네이버·구글·다나와) 구조.
- 구글 삭제 후 가중치 재조정 필요.
- 점수 스케일 표준화 문제 있음.

### 왜 문제가 되었는가?
- 구글을 제외하면 2축(네이버·다나와)이므로  
  전체 스케일 재정립이 필요했기 때문.

### 결정 / 조치
- MVP 스코어 = `0.7 * 네이버 + 0.3 * 다나와`
- 확장 단계에서 Google Trends / YouTube 결합 가능.

---

# 3. 크롤링 관련 기술 이슈

## 3-1. 요청 차단 및 안정성 문제
### 이슈 내용
- 다나와/네이버 쪽에서 User-Agent 기반 차단 사례 있음.
- 빠른 반복 호출 시 429 Too Many Requests 가능.

### 왜 문제가 되었는가?
- 프로젝트는 월간 데이터가 필요하지만  
  크롤링 구조는 “짧은 시간에 여러 요청”을 보내게 되어 있음.

### 결정 / 조치
- 랜덤 User-Agent 적용
- 요청 간 sleep 적용
- Fail-over 전략 필요(향후 확장)

---

# 4. 분석/시각화 관련 이슈

## 4-1. 공급지수 개념 모호성
### 이슈 내용
- 초기 문서에 “공급지수” 개념이 있었음.
- 하지만 실제 공급량에 대한 공개 API가 존재하지 않음.
- 제조사가 생산·배송량 공개 안 함.

### 왜 문제가 되었는가?
- 공급을 정의할 수 있는 실측 데이터를 확보할 수 없음.
- 스펙/옵션 목록을 공급으로 보는 건 개념적으로 부적절.

### 결정 / 조치
- 공급 관련 지표 완전 제거.
- 모든 시장 분석은 “관심도·보급률(등록수) 기반”으로 전환.

---

## 4-2. 워드클라우드 품질 문제
### 이슈 내용
- 광고 텍스트 다수 포함 → 품질 저하
- 불용어(예: “이번”, “리뷰”, “정말”) 문제

### 결정 / 조치
- 불용어 사전 직접 구축
- 텍스트 정제(형태소 분석) 후 워드클라우드 생성

---

# 5. 텍스트 기반 분석 관련 이슈

## 5-1. 블로그 글 감성 분석/요약 도입 논의
### 이슈 내용
- 블로그 본문이 장문이라  
  “워드클라우드만으로는 정보 손실”이 큼.
- 감성 분석/요약 기능 필요성이 대두됨.

### 왜 문제가 되었는가?
- 블로그 3개의 단순 단어 빈도만 보면  
  실제 사용자 인식이 왜곡됨.

### 결정 / 조치
- 감성 분석/요약은 **확장 로드맵**으로 이동.
- MVP에서는 워드클라우드만 구현.

---

# 6. 모델·세그먼트 매핑 관련 이슈

## 6-1. 공공데이터 기반 세그먼트 추론 문제
### 이슈 내용
- 공공데이터에는 모델명 없음 → 세그먼트 연결 불가능.
- 다나와/네이버 모델명을 기반으로  
  세그먼트를 추론해야 함.

### 왜 문제가 되었는가?
- 세그먼트(소형/중형/준대형 등)는 시장 분석의 핵심이지만  
  데이터를 자동으로 매핑할 구조가 없음.

### 결정 / 조치
- 세그먼트 추론 알고리즘은 확장 로드맵으로 이동.

---

# 7. 확장 API 관련 이슈

## 7-1. YouTube Data API 도입 논의
### 이슈 내용
- 영상 기반 관심도(조회수·업로드 수)는 매우 유의미함.
- 하지만 API 쿼터/키 관리·국가 필터링 등이 복잡.

### 왜 문제가 되었는가?
- 구현 난이도 대비 MVP에서 활용 가치가 낮음.

### 결정 / 조치
- YouTube API는 확장 로드맵 항목으로 이동.

---

# 8. 프로젝트 스코프 조절(가장 중요한 이슈)

## 8-1. 기능 과다 → 스코프 정리 필요
### 이슈 내용
- 초기에는:
  - 현대/기아 API
  - 구글 트렌드
  - 공급지수
  - 세그먼트 매핑  
  등 너무 많은 기능이 포함됨.

### 왜 문제가 되었는가?
- 데이터 분석 프로젝트에서 가장 큰 리스크는 **범위 과다**.
- 시간 + 품질 + 복잡도가 모두 증가해 실전 일정에 치명적.

### 결정 / 조치
- MVP 기능을 명확히 고정:
  - 모델 목록 비교
  - 모델 상세 페이지
  - 월간 관심도(네이버+다나와)
  - 블로그 워드클라우드
  - 시장 규모(등록현황)

- 나머지는 전부 확장 로드맵으로 이동.